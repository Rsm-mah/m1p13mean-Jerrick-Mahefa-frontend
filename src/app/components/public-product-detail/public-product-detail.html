<app-navbar></app-navbar>

<div class="page-wrapper">

  <!-- BREADCRUMB -->
  <div class="breadcrumb-bar">
    <div class="container">
      <nav class="breadcrumb">
        <a routerLink="/products">Boutique</a>
        <span class="bc-sep">›</span>
        <a>{{ product.categoryId?.name }}</a>
        <span class="bc-sep">›</span>
        <span>{{ product.name }}</span>
      </nav>
    </div>
  </div>

  <!-- MAIN PRODUCT SECTION -->
  <section class="product-section">
    <div class="container">
      <div class="product-layout">

        <!-- LEFT — Gallery -->
        <div class="gallery-col">
          <div class="gallery-main">
            <div 
              class="main-image"
              [style.backgroundImage]="'url(' + currentImage + ')'"
              style="background-size: cover; background-position: center;">
            </div>
          </div>

          <!-- Thumbnails -->
          <div class="gallery-thumbs">
            <div 
              class="thumb"
              *ngFor="let img of selectedDetail?.images"
              (click)="changeImage(img)"
              [style.backgroundImage]="'url(' + img + ')'">
            </div>
          </div>
        </div>

        <!-- RIGHT — Info -->
        <div class="info-col animate-fade-up">
          <span class="section-eyebrow">Boutique : {{ product.shopId?.name }}</span>
          <h1 class="product-title">{{ product.name }}</h1>

          <!-- Sélecteurs Couleur et Taille -->
          <div class="option-group" *ngIf="product?.details?.length > 1">

            <div class="options-container" *ngIf="selectedDetail?.attributes.color">
              <span>Couleur :</span>
              <div class="options-buttons">
                <button disabled>
                  {{ selectedDetail?.attributes.color }}
                </button>
              </div>
            </div>

            <div class="options-container" *ngIf="availableSizes.length > 0">
              <span>Taille :</span>
              <div class="options-buttons">
                <button 
                  *ngFor="let size of availableSizes"
                  [class.active]="size === selectedSize"
                  (click)="selectSize(size)">
                  {{ size }}
                </button>
              </div>
            </div>

          </div>

          <!-- Prix -->
          <div class="price-block">
            <span class="price-big">{{ selectedDetail?.price | number }} Ar</span>
            <!-- <span class="price-was">360 000 Ar</span>
            <span class="price-save">Économisez 20%</span> -->
          </div>

          <div class="divider"></div>

          <div class="option-group" *ngIf="selectedDetail?.attributes">
            <div 
              class="option-label"
              *ngFor="let attr of selectedDetail.attributes | keyvalue">

              <span>{{ attr.key.toString() | titlecase }}</span>
              <strong>{{ attr.value }}</strong>

            </div>
          </div>

          <!-- Quantity -->
          <div class="option-group">
            <div class="option-label">
              <span>Quantité</span>
              <small>Stock disponible : {{ selectedDetail?.stock }}</small>
            </div>

            <div class="qty-control">
              <button class="qty-btn" (click)="decreaseQty()">−</button>
              <span class="qty-value">{{ quantity }}</span>
              <button class="qty-btn" (click)="increaseQty()">+</button>
            </div>
          </div>

          <!-- CTA -->
          <div class="product-ctas">
            <button class="btn-primary add-cart-btn" (click)="addToCart()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z"/>
                <line x1="3" y1="6" x2="21" y2="6"/>
                <path d="M16 10a4 4 0 01-8 0"/>
              </svg>
              Ajouter au panier
            </button>
          </div>

          <!-- Description tabs -->
          <div class="detail-tabs">
            <button class="detail-tab active">Description</button>
          </div>
          <div class="detail-content">
            <p>{{ product.description }}</p>
          </div>
        </div>

      </div>
    </div>
  </section>

</div>
 
<app-footer></app-footer>

